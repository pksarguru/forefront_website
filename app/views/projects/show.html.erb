<section id="project-show" class="overflow-hidden slider-banner">
  <div class="main-slider">
    <ul class="slides">
      <li>
        <%= image_tag(@project.images.first.url,class:"img-fluid text-overlay") %>
        <div class="slider-overlay">
          <div class="slider-table">
            <div class="slider-vm">
              <div class="container text-center text-overlay">
                <h1><%= @project.name %></h1>
              </div>
            </div>
          </div>
        </div>
      </li>
    </ul>
  </div>
</section>

<section id="project">
  <div class="container">
    <div class="row">
      <div class="col-md-8 offset-md-2">
        <table class="table">
          <thead>
            <tr>
              <th>Team</th>
              <th>Location</th>
              <th>Size</th>
              <th>Completion</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><%= @project.team_name %></td>
              <td><%= @project.location %></td>
              <td><%= number_with_delimiter(@project.area)%>  sq ft</td>
              <td><%= @project.completion_date.year %></td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="space-50"></div>
      <div class="col-md-8 offset-md-2 ">
        <p><%= @project.description %></p>
      </div>
    </div>
  </div>
</section>

<section id="image-gallery">
  <div class="container">
    <div class="row">
        <% @images.each_with_index do |image,i| %>
          <div class="col-md-3">
            <div class="gallery-thumbnail-wrapper">
              <%= image_tag(image.url, onclick:"openModal();currentSlide(#{i+1})", class:"hover-shadow") %>
            </div>
          </div>
        <% end %>
        <div id="myModal"class="modal">
          <span class="close cursor" onclick="closeModal()">&times;</span>
          <div class="modal-content">
            <% @images.each do |image| %>
              <div class="mySlides">
                <div class="numbertext">1 / 4</div>
                <%= image_tag(image.url, style:"width:100%;max-height:100%") %>
              </div>
            <% end %>
            <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
            <a class="next" onclick="plusSlides(1)">&#10095;</a>
            <div class="caption-container">
              <p id="caption"></p>
            </div>
            <% @images.each_with_index do |image,i| %>
              <div class="column">
                <%= image_tag(image.url,class:"demo gallery-thumbnail",onclick:"currentslide(#{i+1})") %>
                <!-- <img class="demo" src="img1.jpg" onclick="currentSlide(1)" alt="Nature"> -->
              </div>
            <% end %>

          </div>
        </div>
    </div>
  </div>




</section>

<script>
function openModal() {
  document.getElementById('myModal').style.display = "block";
}

function closeModal() {
  document.getElementById('myModal').style.display = "none";
}

var slideIndex = 1;
showSlides(slideIndex);

function plusSlides(n) {
  showSlides(slideIndex += n);
}

function currentSlide(n) {
  showSlides(slideIndex = n);
}

function showSlides(n) {
  var i;
  var slides = document.getElementsByClassName("mySlides");
  var dots = document.getElementsByClassName("demo");
  var captionText = document.getElementById("caption");
  if (n > slides.length) {slideIndex = 1}
  if (n < 1) {slideIndex = slides.length}
  for (i = 0; i < slides.length; i++) {
    slides[i].style.display = "none";
  }
  for (i = 0; i < dots.length; i++) {
    dots[i].className = dots[i].className.replace(" active", "");
  }
  slides[slideIndex-1].style.display = "block";
  dots[slideIndex-1].className += " active";
  captionText.innerHTML = dots[slideIndex-1].alt;
}

$(document).keyup(function(e) {
    if (e.keyCode == 27) {
      closeModal();
    }
});

</script>
